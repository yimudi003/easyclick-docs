---
title: EasyClick安卓文档_安卓手机自动化脚本_HID
hide_title: false
hide_table_of_contents: false
sidebar_label: HID主控用法
description: EasyClick 代码热更新,无需无障碍和USB调试实现自动化
keywords: [EasyClick,手机自动化脚本,自动化软件,脚本热更新,代码热更新,无需无障碍和USB调试实现自动化]
---
# HID主控用法
:::tip
HID全称叫 (Human Interface Device)人机接口设备,这个过程是需要将手机插入电脑，在电脑上启动一个EasyClick HID主控程序
- v3.0.0 新版本推荐使用HID小主机 [HID小主机](/docs/zh-cn/centerscreen/hidlinux) 免驱动 成本低 更方便
:::
## 下载软件
- 下载EasyClick HID主控程序,名称是 EasyClick-HID主控程序.zip，包含了linux、win和zadig驱动程序，解压即可运行，下载网盘：123网盘：https://www.123pan.com/s/6Hlmjv-QayIA.html
- 驱动和环境的安装可以参考老冷的教程: https://www.bilibili.com/video/BV1Dp4y1K7JM/


:::tip
  - 本次文档的使用说明基于EasyClick-HID主控平台v1.5.0版本，其他的版本类似
:::
## Linux 平台
- Linux是免驱动的，无需安装驱动
- 解压zip文件后，在终端运行 **sudo ./hid-linux-v2.5.0** 二进制程序
- 如果不知道终端程序，请百度,`用root的方式运行二进制`
- Linux平台优势: **免驱动，直接运行程序，打开网页即可使用，操作和win版本一样**

## Windows 平台

### 运行软件
- 双击hid-win-v1.5.0exe文件后，会有命令框出现
- 在浏览器打开 http://127.0.0.1:8988 即可看到如下的界面
- 打开浏览器如果没有设备，可能是驱动没有安装，直接进入下一步 **安装驱动**

### 安装驱动
- 从网盘下载zadig-2.8.exe文件，这个用来安装驱动的
- 选中这个文件，右键菜单-以管理员身份运行
- 在zadig软件界面，选择 **Options** - **List All Devices** 列出所有设备
- 在zadig软件界面，选择 **Options** - **Advanced Mode** 打开日志详细记录
  <img src='/hid/1.png' width="500" />
- 这里以pixel手机为例子：
  - 1号框是你的手机，右边的edit勾选，可以更改手机名称
  - 2号框这个时候是原始的状态,左侧显示的Driver是NONE，也可能是WinUSB
  - 将绿色剪头右侧的驱动选择到libusbK选项，3号框示例
  - 3号框下面的按钮可能是Install Driver，也可能是Replace Driver，直接点击即可
  <br/>
  <img src='/hid/2.png' width="500" />
  - 安装结果：
  - 1号红色框出现，代表驱动安装成功
  - 如果1号的红色框没有，一直在安装，注意2号框的日志，如果提示有reboot字样，就是需要重启电脑了
<br/>  
<img src='/hid/3.png' width="500" />
- 驱动完成后，在电脑的-控制面板-设备管理器-libusbK下面可以看到你的手机名称,进入下一步 **激活HID**
<br/>  
<img src='/hid/4.png' width="500" />  

### 激活HID

- 经过上面的安装驱动，可以正常识别手机了
<br/>
 <img src='/hid/5.png' width="800" />
- 点击**激活HID**按钮

:::tip
  - HID主控2.0.0版本这个可以弹窗可以不管，也可以正常使用
:::
    
- 手机上会弹出USB配件的提示，直接勾选后确定即可
<img src='/hid/6.png' width="400" />
- 完成后，在EC 的系统设置中，HID设置可以看到设备序列号，就代表成功
  <br/>
  <img src='/androidimg/hid-3.png'  width="300"/>

:::tip
- 这一步是为了让app获取到序列号，与中控对应设备,如果中控有这个序列号了，直接点击顶部**网络扫描**也是可以的
- 激活之后，这个手机的pid和vid会变化，由之前的vid，pid变成(0x18d1，0x2d00)(未开usb调试的)或者(0x18d1，0x2d01)(开usb调试的)
- vid,pid变化了说明是正常的
:::
  
:::tip
- 如果vid和pid变化了，但是**主控未识别到**，请注意这个时候需要再次使用zadig，参考上面**安装驱动的步骤**，重新将手机的驱动安装为libusbK
- 如果Zadig的显示的设备 不是手机名称，可能是Adb或者**Android Accessory Interface**之类的，如果这个设备驱动不是libusbK，也直接替换为libusbK即可
- 方法按照上面的安装驱动
:::

### 初始化坐标(2.0已过期)
:::tip
- HID主控2.0.0版本这个步骤取消了，直接激活hid模式，可以不用初始化坐标,直接使用
:::
- 点击顶部的**初始化坐标**后，系统会扫描设备并且矫正坐标
- 可能会手机弹出USB配件对话框，请注意点击确定按钮
- 完成后，在坐标一栏，可以看到当前的坐标点
  <br/>
  <img src='/hid/8.png' width="800" />
### 网络扫描
- 在同一个网段下的设备，点击**网络扫描**按钮，就会发起链接主控的请求
- 可能会手机弹出USB配件对话框，请注意点击确定按钮
- 完成后会自动提交设备的分辨率
  <br/>
  <img src='/hid/8.png' width="800" />

## 激活HID设备
- 点击HID主控程序的激活HID按钮,会提示正在激活设备
- 如果是第一次激活手机会弹出下图提示<br/>
  <img src='/hid/6.png' width="400" />
- 请勾选 - 默认情况下用于该USB配件
- 点击确定
- 完成后，在EC 的系统设置中，HID设置可以看到设备序列号，就代表成功
  <br/>
  <img src='/androidimg/hid-3.png'  width="300"/>
## 重置HID设备
- 点击重置HID设备，会取消手机默认的设置，然后需要重新激活设备

:::tip
  - 激活设备后，就可以进入开发脚本阶段，开发脚本第一步就是要设置一下HID主控网址，一般使用局域网地址，例如你的HID主控运行在电脑上，
  电脑ip是 192.168.1.3, 那么主控网址就是 http://192.168.1.3:8988, 也可以使用frp软件将端口映射到外网进行请求
  - 如果将手机数据线拔掉，再次插入，激活设备时手机可能会触发二次授权弹窗，也是需要手动确认的  
:::

## 设备改名
- 鼠标放到**设备序列号**一栏<br/>
  <img src='/hid/9.png' width="400" />
- 点击改名，填写你喜欢的名称即可

## 屏蔽设备
- 如果一个设备你认为不是手机可以点击屏蔽按钮
- 屏蔽的设备保存在 程序的同一级目录blockHid.txt文件中
- 如果想取消屏蔽就去blockHid中删除后重启重新主控程序

## 高级组网(v2.2.0+)
- 用于不同hid主控设备之间的组网，你只需要在组网后，通过一个主控即可控制其他的hid程序
- 该情况用于解决多个HID主控配合使用，建议主控用Windows系统，其他的从控系统用Ubuntu系统例如**工控机**，可以大大节约成本
### 扫描HID从控
- 点击高级组网，选择**我要当主控**，直接点击扫描即可，从控会自动提交数据过来，要求是同一个局域网网络互通<br/>
  <img src='/hid/hid-4.png' width="400" />
### 从控链接到主控
- 打开从控的HID机器的管理网页（！！不是主控的！！），点击高级组网，选择**我要链接主控**，填写主控的IP保存即可<br/>
  <img src='/hid/hid-5.png' width="400" />


## USB通信模式(v2.2.0+)
- USB通信是为了解决设备网络和HID不在同一网络的问题，例如设备是手机卡，但是HID主控是在WIFI下等等
- USB通信需要点击**激活HID**按钮，手机会弹出如下对话框，记得一定要点击确定，否则无法进行通信<br/>
  <img src='/hid/6.png' width="400" />
- 在激活HID后，**USB读写/通信时间**一栏会变成**已开启**状态，并且每3秒会变化一次时间，就代表通信是正常，可以正常使用脚本了
  <br/>
  <img src='/hid/hid-6.png' width="400" />
- 如果**USB读写/通信时间**一栏不变化或者没有时间跳动，就点击**重置HID**，恢复到原始状态，然后在进行激活HID
## 常见问题
### 主控不识别设备
  - 参考安装驱动章节，替换驱动即可
### 激活HID后不识别设备
  - 激活HID章节的绿色提示框，二次安装驱动
### 扫描设备没反应
  - 可能是设备没联网，或者不在同一个网段，顶部的网段选项，选择对应的网段IP进行扫描
### 设备的坐标不准确
  - 点击初始化坐标按钮，重新重置坐标系
### 同一品牌设备
  - 同一品牌的设备注意不用重复安装驱动因为pid和vid是一样的
### adb和hid共存
  - hid和是否开启adb无关，开了adb和可以同时使用hid
### libusbK驱动找不到设备
  - 如果有这样的问题，尝试使用libusb-win32驱动，安装过程使用zadig软件，右侧的驱动选择libusb-win32选项
### 黄色感叹号
  - 可能是驱动没安装好，尝试启动电脑，如果还不行，继续下一步
  - 尝试使用libusb-win32驱动，安装过程使用zadig软件，右侧的驱动选择libusb-win32选项
### 多个相同的设备
  - 插入了一个手机 但是出现了多个相同的设备，你只需要将其中一个设备的驱动改成winusb即可
